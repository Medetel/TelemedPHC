<mat-card>
    <mat-card-title>Add Drug</mat-card-title>
    <mat-divider></mat-divider>
    <form  [formGroup]="drug">       
                <div class="row">
                    <div class="col-md-4">
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy">
                            <mat-label class="star">Drug Code</mat-label>
                            <input matInput  #input  maxlength="10" placeholder="Eg.DRG00001" formControlName="drug_code" required> 
                            <mat-error *ngIf="drug.get('drug_code').hasError('required')" >Code is required</mat-error>
                            <mat-error *ngIf="drug.controls['drug_code'].hasError('alphaNumCheck') || drug.controls['drug_code'].hasError('pattern') ">
                            Drug Code must start with "DRG" followed by numeric characters
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label class="star">Category</mat-label>
                            <mat-select formControlName="drg_Category_Id" #typecategory>
                                <mat-option *ngFor="let c of category" [value]="c.drg_Category_Id">
                                    {{c.drg_Category}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="drug.get('drg_Category_Id').hasError('required')">Category is required</mat-error>
                        </mat-form-field>

                    </div>
                    <div class="col-md-4">
                        <!-- <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label class="star">Drug</mat-label>
                            <mat-select formControlName="prc_drug_id_FK" (change)="drugchange()">
                                <mat-option *ngFor="let d of cat" [value]="d.prc_drug_id_FK">{{d.prc_Drg_name}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="drug.get('prc_drug_id_FK').hasError('required')">Drug field is required</mat-error>
                        </mat-form-field> -->
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy" >
                            <mat-label class="star">Drug Name</mat-label>
                            <input matInput placeholder="Eg.MDMA Ecstasy" maxlength="500" formControlName="drg_name" required>
                            <mat-error *ngIf="drug.get('drg_name').hasError('required')" >Drug Name is required</mat-error> 
                            <mat-error *ngIf="drug.get('drg_name').hasError('numericCheck')">
                                Drug Name will allow alphanumeric or characters
                            </mat-error>                             
                            <mat-error *ngIf="drug.get('drg_name').hasError('alfaNumCharCheck')">
                                Drug Name will allow alphanumeric characters
                            </mat-error> 
                            <mat-error *ngIf="drug.get('drg_name').hasError('spaceCheck')">
                                Drug Name will not allow white space
                            </mat-error>                         
                        </mat-form-field>
                    </div> 
                               
                    <div class="col-md-4">
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy" >
                            <mat-label class="star">Type</mat-label>
                            <mat-select formControlName="drg_type_id_FK" required>
                                <mat-option *ngFor="let t of type" [value]="t.drug_type_Id">{{t.drg_type_name}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="drug.get('drg_type_id_FK').hasError('required')" >Type is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy">
                            <mat-label>Strength</mat-label>
                            <input matInput maxlength="4" placeholder="Eg:20mg/25ml/10g" formControlName="drg_strength">
                            <!-- <mat-error *ngIf="drug.get('drg_strength').hasError('required')"> Strength is required</mat-error> -->
                            <mat-error *ngIf="drug.get('drg_strength').hasError('strengthCheck')">
                                Please enter digit only
                             </mat-error> 
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy" >
                            <mat-label>Units</mat-label>
                            <mat-select formControlName="drg_unit_id_FK">
                                <mat-option *ngFor="let u of units" [value]="u.drg_unit_id">{{u.drg_Unit}}</mat-option>
                            </mat-select>
                            <!-- <mat-error *ngIf="drug.get('drg_unit_id_FK').hasError('required')">Units is required</mat-error> -->
                        </mat-form-field>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field [hideRequiredMarker]="true" class="example-full-width" appearance="legacy" >
                            <mat-label class="star">Manufacturer</mat-label>
                            <mat-select formControlName="drg_manufacturer_id_FK" required>
                                <mat-option *ngFor="let m of manuf" [value]="m.drg_manuf_id">{{m.drg_manuf_name}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="drug.get('drg_manufacturer_id_FK').hasError('required')" >Manufacturer is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label>Warning</mat-label>
                            <textarea matInput  maxlength="500" formControlName="drg_warnings"></textarea>
                            <!-- <mat-error *ngIf="drug.get('drg_warnings').hasError('required')" >Warning is required</mat-error> -->
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label>Instruction</mat-label>
                            <textarea matInput maxlength="500" formControlName="instruction"></textarea>
                        </mat-form-field>
                    </div>
                    <!-- <div class="col-md-6">
                        <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label>Category</mat-label>
                            <mat-select formControlName="category_Id" #typecategory
                                (valueChange)="typescategory(typecategory.value)" required>
                                <mat-option *ngFor="let c of catogory" [value]="c.category_Id">
                                    {{c.category_Name}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="drug.get('category_Id').hasError('required')">Category is required</mat-error>
                        </mat-form-field> -->
                        <!-- <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label>Description</mat-label>
                            <textarea matInput maxlength="500" formControlName="discription" ></textarea>
                        </mat-form-field> -->
                    <!-- </div> -->
                    <div class="col-md-2">
                        <mat-checkbox class="example-margin" formControlName="drg_medcine_type" (change)="onChangeMedcineType($event)">Generic</mat-checkbox>
                    </div>
                    <!-- <div class="col-md-10" >
                        <mat-form-field class="example-full-width" appearance="legacy" >
                            <mat-label>Instruction</mat-label>
                            <textarea matInput maxlength="500" formControlName="instruction" ></textarea>
                        </mat-form-field>
                    </div> -->
                </div>
                <div class="footer_button">                    
                    <button id="save" mat-raised-button color="primary" (click)="save()" >Save</button>
                    <button routerLink="/base/master/drugs" id="cancel" mat-raised-button color="warn">Close</button>
                </div>           
    </form>
</mat-card>

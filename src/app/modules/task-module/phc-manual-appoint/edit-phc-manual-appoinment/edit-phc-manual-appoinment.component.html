<h1 mat-dialog-title>Edit Appointment</h1>
<mat-divider></mat-divider>
<div mat-dialog-content>
    <form [formGroup]="patient">
        <fieldset>
            <legend>Patient Details</legend>
            <div class="row">
                <div class="col-md-3">
                    <h4>Patient ID :&nbsp; <span style="color: green;">{{patient_id}}</span></h4>
                </div>
                <div class="col-md-3">
                    <h4>Patient Name :&nbsp; <span style="color: green;">{{patient_name}}</span></h4>
                </div>
                <div class="col-md-3">
                    <h4 class="gender">Gender: <span style="color: green;">{{patient_gender}}</span></h4>
                </div>
                <div class="col-md-3">
                    <img class="images" matPrefix [src]="Image_Url" width="100px" height="100px" alt="image not found">
                </div>
                <div class="col-md-3">
                    <h4>DOB: <span style="color: green;">{{patient_dob | date:'dd-MM-yyy'}}</span></h4>
                </div>
                <div class="col-md-3">
                    <h4>Age: <span style="color: green;">{{patient_age}}</span></h4>
                </div>
            </div>
        </fieldset>
    </form>
    <form [formGroup]="fixappointment">
        <fieldset>
            <legend>Vital-Signs</legend>
            <div class="row">
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Temperature <span style="color: rgb(72, 135, 230);">(°C)</span></mat-label>
                        <input matInput formControlName="tempInCelsius" maxlength="7" placeholder=""
                            [ngClass]="{'all': (patient.controls.tempInCelsius>=1 && patient.controls.tempInCelsius==90)? false:true,'warn':tempInFahrenheit==0 ,'edit':tempInFahrenheit>=90}">
                        <mat-error
                            *ngIf="fixappointment.controls['tempInCelsius'].hasError('invalidName') || fixappointment.controls['tempInCelsius'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Blood Pressure <span style="color: rgb(72, 135, 230);">(mmHg)</span></mat-label>
                        <input matInput maxlength="7" formControlName="bloodPressure" placeholder="">
                        <mat-error *ngIf="fixappointment.controls['bloodPressure'].hasError('pattern')">
                            Please enter value in proper format.
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Pulse<span style="color: rgb(72, 135, 230);">(bpm)</span></mat-label>
                        <input matInput maxlength="7" formControlName="pulseRate" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['pulseRate'].hasError('invalidName') || fixappointment.controls['pulseRate'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <!-- <div class="col-md-4">
                        <mat-form-field class="example-full-width" appearance="legacy">
                            <mat-label>Respiratory Rate <span style="color: rgb(72, 135, 230);">(Breaths/min)</span></mat-label>
                            <input matInput maxlength="7" formControlName="respiratoryRate" placeholder="" >
                            <mat-error *ngIf="fixappointment.controls['respiratoryRate'].hasError('invalidName') || fixappointment.controls['respiratoryRate'].hasError('pattern') ">
                                Please enter Number only
                                </mat-error>
                        </mat-form-field>
                    </div> -->
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Spo2 <span style="color: rgb(72, 135, 230);">(%)</span></mat-label>
                        <input matInput maxlength="7" formControlName="oxygenSaturation" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['oxygenSaturation'].hasError('invalidName') || fixappointment.controls['oxygenSaturation'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Hemoglobin <span style="color: rgb(72, 135, 230); ">(g/dl)</span></mat-label>
                        <input matInput maxlength="7" formControlName="hemoglobin" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['hemoglobin'].hasError('invalidName') || fixappointment.controls['hemoglobin'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Glucose <span style="color: rgb(72, 135, 230); ">(mg/dl)</span></mat-label>
                        <input matInput maxlength="7" formControlName="sugar" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['sugar'].hasError('invalidName') || fixappointment.controls['sugar'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Total Cholesterol <span style="color: rgb(72, 135, 230); ">(mg/dL)</span></mat-label>
                        <input matInput maxlength="6" placeholder="" formControlName="lp_total_cholesterol">
                        <mat-error
                            *ngIf="fixappointment.controls['lp_total_cholesterol'].hasError('invalidName') || fixappointment.controls['lp_total_cholesterol'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Triglycerides <span style="color: rgb(72, 135, 230); ">(mg/dL)</span></mat-label>
                        <input matInput maxlength="6" placeholder="" formControlName="lp_triglycerides">
                        <mat-error
                            *ngIf="fixappointment.controls['lp_triglycerides'].hasError('invalidName') || fixappointment.controls['lp_triglycerides'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>HDL Cholesterol <span style="color: rgb(72, 135, 230); ">(mg/dL)</span></mat-label>
                        <input matInput maxlength="6" placeholder="" formControlName="lp_hdl_cholesterol">
                        <mat-error
                            *ngIf="fixappointment.controls['lp_hdl_cholesterol'].hasError('invalidName') || fixappointment.controls['lp_hdl_cholesterol'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>LDL <span style="color: rgb(72, 135, 230); ">(mg/dL)</span></mat-label>
                        <input matInput maxlength="6" placeholder="" formControlName="lp_ldl">
                        <mat-error
                            *ngIf="fixappointment.controls['lp_ldl'].hasError('invalidName') || fixappointment.controls['lp_ldl'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Height <span style="color: rgb(72, 135, 230); ">(Cm)</span></mat-label>
                        <input matInput maxlength="7" formControlName="height" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['height'].hasError('invalidName') || fixappointment.controls['height'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Weight <span style="color: rgb(72, 135, 230); ">(Kg)</span></mat-label>
                        <input matInput maxlength="7" formControlName="weight" placeholder="">
                        <mat-error
                            *ngIf="fixappointment.controls['weight'].hasError('invalidName') || fixappointment.controls['weight'].hasError('pattern') ">
                            Please enter Number only
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-4">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>BMI (kg/m²)</mat-label>
                        <input matInput placeholder="" formControlName="pA_BMI" readonly>
                    </mat-form-field>
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>Other-Info</legend>
            <div class="row">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <mat-label>Complaints</mat-label>
                        <mat-select formControlName="complaint" [(value)]="complaintselected"
                            [compareWith]="objectComparisonFunctioncomplaint" multiple required (openedChange)="resetComplaintSearchInput()">
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let complaint of fixappointment.value.complaint"
                                        [removable]="true" (removed)="onToppingRemovedcomplaint(complaint)">
                                        {{ complaint.cmst_Name }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                            <input type="text" class="p-2" autocomplete="off" matInput placeholder="Search by name..." #multiUserSearch
                                        (input)="onInputChange()" />
                                        <div class="row">
                                            <div class="col-md-6" *ngFor="let c of complaint">
                                                     <mat-option  [value]="c" [disabled]="isOptionDisabled3(c)">{{c.cmst_Name}}</mat-option>
                                            </div>
                                        </div>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <mat-label>Symptoms</mat-label>
                        <mat-select formControlName="symptoms" [(value)]="symptomsselected"
                            [compareWith]="objectComparisonFunctionsymptoms" multiple required (openedChange)="resetSymptomsSearchInput()">
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let symptoms of fixappointment.value.symptoms" [removable]="true"
                                        (removed)="onToppingRemovedsymptoms(symptoms)">
                                        {{ symptoms.smst_Name }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                            <input type="text" class="p-2" autocomplete="off" matInput placeholder="Search by name..." #multiUserSearch1
                                        (input)="onInputChange1()" />
                                        <div class="row">
                                            <div class="col-md-6" *ngFor="let s of symptoms">
                            <mat-option  [value]="s" [disabled]="isOptionDisabled2(s)">{{s.smst_Name}}</mat-option>
                                            </div></div>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <mat-label>Present Illness</mat-label>
                        <mat-select formControlName="diseasesDtl" [(value)]="diseasesselected"
                            [compareWith]="objectComparisonFunctionPresentIlleness" multiple (openedChange)="resetDiseasesSearchInput()">
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let diseases of fixappointment.value.diseasesDtl"
                                        [removable]="true" (removed)="onToppingRemoveddiseases(diseases)">
                                        {{ diseases.diseases_Name }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                            <input type="text" class="p-2" autocomplete="off" matInput placeholder="Search by name..." #multiUserSearch2
                                        (input)="onInputChange2()" />
                                        <div class="row">
                                            <div class="col-md-4" *ngFor="let d of diseases">
                                                   <mat-option  [value]="d" [disabled]="isOptionDisabled1(d)">{{d.diseases_Name}}</mat-option>
                                            </div>
                                        </div>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Allergy Signs</mat-label>
                        <mat-select formControlName="allergySigns_DTL" [(value)]="allergysignsselected"
                            [compareWith]="objectComparisonFunctionallergysigns" multiple required
                            (selectionChange)="onAllergySelectionChange()">
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let allergysigns of fixappointment.value.allergySigns_DTL"
                                        [removable]="true" (removed)="onToppingRemovedallergysigns(allergysigns)">
                                        {{allergysigns.al_Name}}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                            <div class="row">
                                <div class="col-md-4" *ngFor="let a of allergy">
                            <mat-option  [value]="a" [disabled]="isOptionDisabled(a)">{{a.al_Name}}</mat-option>
                                </div></div>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <mat-label>Under Medication</mat-label>
                        <mat-select formControlName="underMedication" [(value)]="medicationsselected"
                            [compareWith]="objectComparisonFunctionmedications" multiple required
                            (openedChange)="resetMedicationSearchInput()">
                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let topping of fixappointment.value.underMedication" [removable]="true"
                                        (removed)="onToppingRemovedm(topping)">
                                        {{ topping.medic_name }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>
                            <input type="text" class="p-2" autocomplete="off" matInput placeholder="Search by name..." #multiUserSearch3
                                (input)="onInputChange3()" />
                                <div class="row">
                                    <div class="col-md-4" *ngFor="let m of medication">
                            <mat-option [value]="m" [disabled]="isOptionDisabledm(m)">{{m.medic_name}}</mat-option>
                                    </div></div>
                        </mat-select>
                    </mat-form-field>
                </div>
                <!-- <div class="col-md-6">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Under BP-medication</mat-label>
                        <mat-select formControlName="underBPMedication" required>
                            <mat-option value="Yes">Yes</mat-option>
                            <mat-option value="No">No</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Under Sugar-medication</mat-label>
                        <mat-select formControlName="underSugarMedication" required>
                            <mat-option value="Yes">Yes</mat-option>
                            <mat-option value="No">No</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div> -->
            </div>
        </fieldset>

        <fieldset>
            <legend>Consultation</legend>
            <div class="row">
                <div class="col-md-3">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Date</mat-label>
                        <input matInput [matDatepicker]="dp" min="{{minDate | date:'yyyy-MM-dd'}}" formControlName="select_day" required>
                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                        <mat-datepicker #dp></mat-datepicker>
                        <mat-error *ngIf="fixappointment.get('select_day').hasError('required')">Date is
                            required</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>From-Time</mat-label>
                        <input matInput type="time" matInput formControlName="select_FrmTime" min="09:00" max="18:00"
                            required>
                        <mat-error *ngIf="fixappointment.get('select_FrmTime').hasError('required')">From time is
                            required</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>To-Time</mat-label>
                        <input matInput type="time" matInput formControlName="select_toTime" min="09:00" max="18:00"
                            required>
                        <mat-error *ngIf="fixappointment.get('select_toTime').hasError('required')">To time is
                            required</mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width" appearance="legacy">
                        <mat-label>Hospital</mat-label>
                        <mat-select formControlName="hos_Id" required>
                            <mat-option *ngFor="let h of hospitaldd"
                                [value]="h.hos_Id">{{h.hos_HospitalName}}&nbsp;{{h.dO_LastName}}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="fixappointment.get('hos_Id').hasError('required')">Hospital is
                            required</mat-error>
                    </mat-form-field>
                </div>

            </div>
            <!-- <div class="footer_button">
                    <button routerLink="/base/task/manualappointment" class="cancel" mat-raised-button color="warn">Close</button>
                    <button class="save" mat-raised-button color="primary" (click)="updateform()">Fix Appointment</button>
                </div> -->
        </fieldset>
    </form>
</div>
<div mat-dialog-actions align="end">
    <button class="save" mat-raised-button color="primary" [disabled]="fixappointment.invalid"
        (click)="updateform()">Update</button>
    <button mat-dialog-close class="cancel" mat-raised-button color="warn">Close</button>
</div>
<!-- <div mat-dialog-actions align="end" >
    <button mat-raised-button color="warn" mat-dialog-close>Close</button>
</div> -->